@page "/export"
@inject PdfExportService Exporter

<div class="max-w-lg mx-auto backdrop-blur-xl bg-white/5 p-6 rounded-2xl animate-page">

    <h1 class="text-xl font-bold mb-4">Export Journal</h1>

    <input type="date" class="w-full mb-3" @bind="from" />
    <input type="date" class="w-full mb-3" @bind="to" />

    <button class="w-full bg-indigo-600 py-2 rounded-xl"
            @onclick="Export">
        Export PDF
    </button>

    @if (path != null)
    {
        <p class="mt-4 text-sm text-green-400">
            Exported to:<br />@path
        </p>
    }

</div>

@code {
    DateOnly from = DateOnly.FromDateTime(DateTime.Now.AddDays(-7));
    DateOnly to = DateOnly.FromDateTime(DateTime.Now);
    string? path;

    async Task Export()
    {
        path = await Exporter.ExportAsync(from, to);
    }
}
