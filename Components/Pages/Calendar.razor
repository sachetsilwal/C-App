@page "/calendar"
@inject IJournalService Journal
@inject NavigationManager Nav

<div class="grid grid-cols-7 gap-3 animate-page">

    @foreach (var day in days)
    {
        <div class="p-3 rounded-xl bg-white/5 hover:bg-indigo-600 cursor-pointer"
             @onclick="@(() => Open(day))">
            <p>@day.Day</p>
        </div>
    }

</div>

@code {
    List<DateOnly> days = new();

    protected override void OnInitialized()
    {
        var today = DateOnly.FromDateTime(DateTime.Now);
        var start = new DateOnly(today.Year, today.Month, 1);
        var end = start.AddMonths(1).AddDays(-1);

        for (var d = start; d <= end; d = d.AddDays(1))
            days.Add(d);
    }

    void Open(DateOnly d)
    {
        Nav.NavigateTo($"/journal?date={d}");
    }
}
